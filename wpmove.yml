# wpmove.yml
# Environments configuration for WordPress migrations
# This template includes all supported options with sensible defaults.

local:
  # Path to your local WordPress installation (directory containing wp-content)
  wordpress_path: ./wordpress
  # wp-cli command/binary to use locally
  wp_cli: wp
  # Local database credentials (used when pushing db to remote)
  db:
    host: 127.0.0.1
    name: wordpress
    user: root
    password: ''
    charset: utf8mb4
  # One or more URLs; used to compute search-replace pairs during DB sync
  urls:
    - http://localhost
  # Top-level excludes always ignored when syncing this environment
  exclude:
    - .git/
    - node_modules/
  # Rsync tuning applied when this env is the destination of pull
  sync:
    excludes:
      - wp-content/cache/
    includes: []
    delete: false
  # Path overrides; adjust if your structure is non-standard
  paths:
    wp_content: wp-content
    wp_config: wp-config.php
    plugins: wp-content/plugins
    mu_plugins: wp-content/mu-plugins
    themes: wp-content/themes
    uploads: wp-content/uploads
    languages: wp-content/languages
  # Hooks executed before/after push/pull. Commands run via sh -lc locally or over SSH remotely.
  hooks:
    push:
      before:
        local:
          - echo "Backing up local before push"
        remote: []
      after:
        local: []
        remote:
          - wp cache flush
    pull:
      before:
        local: []
        remote: []
      after:
        local:
          - wp cache flush
        remote: []

production:
  # Remote SSH connection details (required for push/pull)
  ssh:
    host: example.com
    user: deploy
    port: 22
    path: /var/www/html
  # wp-cli command on the remote host
  wp_cli: wp
  # Remote database credentials (used when pulling db from remote)
  db:
    host: 127.0.0.1
    name: wordpress
    user: wp
    password: secret
    charset: utf8mb4
  # One or more URLs on the remote site
  urls:
    - https://example.com
  # Always ignored when syncing to this remote
  exclude:
    - .well-known/acme-challenge/
  # Rsync tuning applied when this env is the destination of push
  sync:
    excludes:
      - wp-content/cache/
    includes: []
    delete: false
  # Path overrides for the remote host (adjust if needed)
  paths:
    wp_content: wp-content
    wp_config: wp-config.php
    plugins: wp-content/plugins
    mu_plugins: wp-content/mu-plugins
    themes: wp-content/themes
    uploads: wp-content/uploads
    languages: wp-content/languages
  # Remote hooks
  hooks:
    push:
      before:
        local: []
        remote:
          - echo "About to deploy on remote"
      after:
        local: []
        remote:
          - wp cache flush --allow-root
    pull:
      before:
        local: []
        remote: []
      after:
        local: []
        remote: []
